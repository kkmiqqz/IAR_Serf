# å­—èŠ‚åºæ ¼å¼åŒ¹é…ä¿®å¤

## ğŸ” é—®é¢˜åˆ†æ

ä»è°ƒè¯•ä¿¡æ¯å¯ä»¥çœ‹å‡ºï¼š

1. **æ•°æ®å­˜å‚¨æ­£ç¡®**ï¼š`SetBuffer: data_[0]=0x5DDDDC00`
2. **Peekè¯»å–é”™è¯¯**ï¼š`result=0x00005DDD` åº”è¯¥æ˜¯ `0x00000032` (50)
3. **Forwardæ“ä½œé”™è¯¯**ï¼š`buffer_=0xDC005DDD` ä½æµè¢«ç ´åäº†

**æ ¹æœ¬é—®é¢˜**ï¼šå­—èŠ‚è½¬æ¢é€»è¾‘æœ‰é—®é¢˜ï¼æˆ‘ä»¬çš„ä½æµæ ¼å¼æ˜¯**å°ç«¯åº**ï¼Œä½†å­—èŠ‚è½¬æ¢ä½¿ç”¨äº†**å¤§ç«¯åº**ï¼

## ğŸ”§ é—®é¢˜æ ¹æº

1. **GetBuffer**ï¼šå°†32ä½æ•°æ®è½¬æ¢ä¸ºå­—èŠ‚æ•°ç»„ï¼ˆå¤§ç«¯åºï¼‰
2. **SetBuffer**ï¼šå°†å­—èŠ‚æ•°ç»„è½¬æ¢ä¸º32ä½æ•°æ®ï¼ˆå¤§ç«¯åºï¼‰
3. **ä½†æ˜¯**ï¼šæˆ‘ä»¬çš„ä½æµæ ¼å¼æ˜¯**å°ç«¯åº**ï¼

## ğŸ› ï¸ ä¿®å¤æ–¹æ¡ˆ

### 1. ä¿®å¤GetBufferå‡½æ•°

**ä¿®å¤å‰**ï¼ˆå¤§ç«¯åºï¼‰ï¼š
```cpp
ret_ptr[i] = (word >> (24 - byte_index * 8)) & 0xFF;
```

**ä¿®å¤å**ï¼ˆå°ç«¯åºï¼‰ï¼š
```cpp
// ä¿®å¤ï¼šä½¿ç”¨å°ç«¯åºæ ¼å¼ï¼Œä¸ä½æµæ ¼å¼åŒ¹é…
ret_ptr[i] = (word >> (byte_index * 8)) & 0xFF;
```

### 2. ä¿®å¤SetBufferå‡½æ•°

**ä¿®å¤å‰**ï¼ˆå¤§ç«¯åºï¼‰ï¼š
```cpp
word |= ((uint32_t)input_ptr[i * 4 + j]) << (24 - j * 8);
```

**ä¿®å¤å**ï¼ˆå°ç«¯åºï¼‰ï¼š
```cpp
// ä¿®å¤ï¼šä½¿ç”¨å°ç«¯åºæ ¼å¼ï¼Œä¸ä½æµæ ¼å¼åŒ¹é…
word |= ((uint32_t)input_ptr[i * 4 + j]) << (j * 8);
```

## ğŸ¯ é¢„æœŸç»“æœ

ä¿®å¤ååº”è¯¥çœ‹åˆ°ï¼š
```
SetBuffer: data_[0]=0x5DDDDC00
Peek: len=16, buffer_=0x5DDDDC00, result=0x00000032  // âœ… æ­£ç¡®çš„block_size=50
Forward: after bit_in_buffer_=16, buffer_=0xDC000000  // âœ… æ­£ç¡®çš„ä½æµçŠ¶æ€
Peek: len=32, buffer_=0xDC000000, result=0xDC000000  // âœ… æ­£ç¡®çš„max_diff
è§£å‹: block_size=50, max_diff=0.000100  // âœ… æ­£ç¡®çš„è§£å‹ç¼©
```

## ğŸš€ ä¸‹ä¸€æ­¥

é‡æ–°ç¼–è¯‘è¿è¡Œï¼Œåº”è¯¥ä¼šçœ‹åˆ°ï¼š
1. âœ… æ­£ç¡®çš„å­—èŠ‚åºè½¬æ¢
2. âœ… æ­£ç¡®çš„ä½æµè¯»å–
3. âœ… æ­£ç¡®çš„block_sizeå’Œmax_diff
4. âœ… æˆåŠŸçš„è§£å‹ç¼©
5. âœ… æ­£ç¡®çš„éªŒè¯ç»“æœ

è¿™å°†å®Œæˆæ•´ä¸ªSERF-QTå‹ç¼©ç®—æ³•çš„IARé€‚é…ï¼




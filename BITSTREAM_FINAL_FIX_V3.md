# ä½æµæ ¼å¼æœ€ç»ˆä¿®å¤æ€»ç»“

## ğŸ” é—®é¢˜åˆ†æ

ä»è°ƒè¯•ä¿¡æ¯å¯ä»¥çœ‹å‡ºï¼š

1. **å‹ç¼©æˆåŠŸ**ï¼š`block_size=50, max_diff=0.000100` âœ…
2. **è§£å‹å¤±è´¥**ï¼š`block_size=59, max_diff=-0.005676` âŒ åº”è¯¥æ˜¯ `50, 0.000100`
3. **ç¬¬äºŒä¸ªè§£å‹å®Œå…¨å¤±è´¥**ï¼š`block_size=0, max_diff=0.000000` âŒ

**æ ¹æœ¬é—®é¢˜**ï¼šä½æµçš„å†™å…¥å’Œè¯»å–æ ¼å¼ä»ç„¶ä¸åŒ¹é…ï¼

## ğŸ”§ é—®é¢˜æ ¹æºåˆ†æ

### é—®é¢˜1ï¼šbit_in_buffer_åˆå§‹åŒ–é”™è¯¯
1. **SetBuffer**ï¼š`bit_in_buffer_ = 32;` - åˆå§‹åŒ–ä¸º32ä½
2. **Peek**ï¼š`result = (buffer_ >> (32 - len)) & mask;` - ä»é«˜ä½è¯»å–

**é—®é¢˜**ï¼šå½“ `bit_in_buffer_ = 32` æ—¶ï¼Œ`Peek` å‡½æ•°ä¸­çš„ `(32 - len)` æ˜¯æ­£ç¡®çš„ï¼Œä½† `Forward` å‡½æ•°ä¸­çš„ `buffer_ <<= len` ä¼šå¯¼è‡´é—®é¢˜ã€‚

### é—®é¢˜2ï¼šForwardå‡½æ•°é€»è¾‘é”™è¯¯
1. `buffer_ <<= len;` - åº”è¯¥å·¦ç§»
2. `bit_in_buffer_ = 32;` - åº”è¯¥å¢åŠ 32ä½

## ğŸ› ï¸ ä¿®å¤æ–¹æ¡ˆ

### 1. ä¿®å¤SetBufferå‡½æ•°
**ä¿®å¤å‰**ï¼š
```cpp
bit_in_buffer_ = 32;  // ä¿®å¤ï¼šåˆå§‹åŒ–ä¸º32ï¼Œå› ä¸ºç¼“å†²åŒºæœ‰32ä½æ•°æ®
```

**ä¿®å¤å**ï¼š
```cpp
bit_in_buffer_ = 0;  // ä¿®å¤ï¼šåˆå§‹åŒ–ä¸º0ï¼Œä¸æ˜¯32
```

### 2. ä¿®å¤Forwardå‡½æ•°
**ä¿®å¤å‰**ï¼š
```cpp
// å°†ä¸‹ä¸€ä¸ªå­—çš„é«˜ä½æ·»åŠ åˆ°å½“å‰ç¼“å†²åŒºçš„ä½ä½
buffer_ |= (next_word >> bit_in_buffer_);
bit_in_buffer_ = 32;
```

**ä¿®å¤å**ï¼š
```cpp
// å°†ä¸‹ä¸€ä¸ªå­—çš„é«˜ä½æ·»åŠ åˆ°å½“å‰ç¼“å†²åŒºçš„ä½ä½
buffer_ |= (next_word >> bit_in_buffer_);
bit_in_buffer_ += 32;
```

## ğŸ¯ é¢„æœŸç»“æœ

ä¿®å¤ååº”è¯¥çœ‹åˆ°ï¼š
```
SetBuffer: data_[0]=0x003BBBBA
Peek: len=16, buffer_=0x003BBBBA, result=0x00000032  // âœ… æ­£ç¡®çš„block_size=50
Forward: after bit_in_buffer_=16, buffer_=0xBBBA0000  // âœ… æ­£ç¡®çš„ä½æµçŠ¶æ€
Peek: len=32, buffer_=0xBBBA0000, result=0xBBBA0000  // âœ… æ­£ç¡®çš„max_diff
è§£å‹: block_size=50, max_diff=0.000100  // âœ… æ­£ç¡®çš„è§£å‹ç¼©
```

## ğŸš€ ä¸‹ä¸€æ­¥

ç°åœ¨è¯·é‡æ–°ç¼–è¯‘å’Œè¿è¡Œæµ‹è¯•ã€‚ä¿®å¤åçš„ä½æµæ ¼å¼åº”è¯¥èƒ½ï¼š
1. âœ… æ­£ç¡®åŒ¹é…ä½æµå†™å…¥å’Œè¯»å–é€»è¾‘
2. âœ… æ­£ç¡®åˆå§‹åŒ–bit_in_buffer_
3. âœ… æ­£ç¡®è¯»å–block_sizeå’Œmax_diff
4. âœ… æˆåŠŸè§£å‹ç¼©å¹¶éªŒè¯ç»“æœ
5. âœ… å®Œæˆæ•´ä¸ªSERF-QTå‹ç¼©ç®—æ³•çš„IARé€‚é…ï¼

è¿™æ¬¡åº”è¯¥èƒ½æˆåŠŸäº†ï¼ğŸ¤






